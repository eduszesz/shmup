pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--my shmup
--by eduszesz

function _init()
	t=0
	ship={
		sp=2,
		x=64,
		y=64,
		sx=0,
		sy=0,
		fl=4}
		stars={}
	
	for i=1,100 do
		local s={
									x=rnd(128),
									y=rnd(128),
									sy=rnd(2)+1,
									cl=7}
		if s.sy<2 then
			s.cl=13
		end							
		add(stars,s)							
	end
		
end

function _update()
	t+=1
	ship.sp=2
	ship.sx=0
	ship.sy=0
	if btn(0) then
		ship.sp=1
		ship.sx=-3
	end
	if btn(1) then
		ship.sp=3
		ship.sx=3
	end
	if btn(2) then
		ship.sy=-3
	end
	if btn(3) then
		ship.sy=3
	end
	
	ship.x+=ship.sx
	ship.y+=ship.sy
	
	if ship.x<0 then
		ship.x=0
	end
	if ship.x>120 then
		ship.x=120
	end
	
	if ship.y<0 then
		ship.y=0
	end
	if ship.y>120 then
		ship.y=120
	end
	if t%4<2 then
		ship.fl=5
	else
		ship.fl=4
	end	
end

function _draw()
	cls()
	
	for s in all(stars) do
		s.y+=s.sy
		if s.y>128 then
			s.y=-100
			s.x=rnd(128)
		end
		pset(s.x,s.y,s.cl)
	end
	
	spr(ship.sp,ship.x,ship.y)
	spr(ship.fl,ship.x,ship.y+8)
end
__gfx__
00000000016610001016610100016610000440000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000166105050166105050166100087a800008a980000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700016611616116611616116610008a98000089800000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000d76d16161d77d16161d67d0008980000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700006766661666c766616666760000800000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070005c65661665cc56616656c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000065566101665566101665560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dadd10001daad10001ddad0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
